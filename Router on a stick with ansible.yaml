R1

configure terminal
hostname R1

interface G 0/0
no shutdown

interface G 0/0.100
description MGMT with Ansible
encapsulation dot1q 100
ip address 192.168.100.1

interface G 0/0.10
encapsulation dot1q 10
ip address 192.168.10.1

interface G 0/0.20
encapsulation dot1q 20
ip address 192.168.20.1

interface G 0/0.30
encapsulation dot1q 30
ip address 192.168.30.1

ip dhcp pool VLAN10
network 192.168.10.0 255.255.255.0
default-router 192.168.10.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN20
network 192.168.20.0 255.255.255.0
default-router 192.168.20.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN30
network 192.168.30.0 255.255.255.0
default-router 192.168.30.1
dns-server 8.8.8.8 8.8.4.4
lease 1

exit
ip dhcp excluded-address 192.168.10.1 192.168.10.10
ip dhcp excluded-address 192.168.20.1 192.168.20.10
ip dhcp excluded-address 192.168.30.1 192.168.30.10

==============================================================================

SW1

configure terminal
hostname SW1

vlan 100
name MGMT with Ansible

vlan 10
name RED

vlan 20
name GREEN

vlan 30
name BLUE

interface G 0/0
switchport mode access
switchport access vlan 100

interface G 0/2
switchport mode access
switchport access vlan 10

interface G 0/3
switchport mode access
switchport access vlan 20

interface G 1/0
switchport mode access
switchport access vlan 30

interface G 0/1
switchport trunk encapsulation dot1q
switchport mode trunk


==============================================================================

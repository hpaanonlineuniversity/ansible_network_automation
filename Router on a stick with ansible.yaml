R1

configure terminal
hostname R1

interface G 0/0
no shutdown

interface G 0/0.101
description MGMTwithAnsible
encapsulation dot1q 101
ip address 192.168.101.1

interface G 0/0.10
encapsulation dot1q 10
ip address 192.168.10.1

interface G 0/0.20
encapsulation dot1q 20
ip address 192.168.20.1

interface G 0/0.30
encapsulation dot1q 30
ip address 192.168.30.1

ip dhcp pool VLAN10
network 192.168.10.0 255.255.255.0
default-router 192.168.10.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN20
network 192.168.20.0 255.255.255.0
default-router 192.168.20.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN30
network 192.168.30.0 255.255.255.0
default-router 192.168.30.1
dns-server 8.8.8.8 8.8.4.4
lease 1

exit
ip dhcp excluded-address 192.168.10.1 192.168.10.10
ip dhcp excluded-address 192.168.20.1 192.168.20.10
ip dhcp excluded-address 192.168.30.1 192.168.30.10


ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory

==============================================================================

SW1

configure terminal
hostname SW1

vlan 101
name MGMTwithAnsible

vlan 10
name RED

vlan 20
name GREEN

vlan 30
name BLUE

interface G 0/0
description MGMT-TO-R1
switchport mode access
switchport access vlan 101

interface G 0/2
switchport mode access
switchport access vlan 10

interface G 0/3
switchport mode access
switchport access vlan 20

interface G 1/0
switchport mode access
switchport access vlan 30

interface G 0/1
description TRUNK-TO-R1
switchport trunk encapsulation dot1q
switchport mode trunk

interface Vlan 101
ip address 192.168.101.2 255.255.255.0

ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory


==============================================================================
